# Hachage automatique des mots de passe pour l'entité Utilisateur
security:
    password_hashers:
        App\Entity\Utilisateur:
            algorithm: auto
            
# Configuration par défaut : Symfony va automatiquement injecter les dépendances (autowire) et enregistrer les services avec les bons tags (autoconfigure)
# default configuration for services in *this* file
services:
    _defaults:
        autowire: true      # Automatically injects dependencies in your services.
        autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.

    # Tous les fichiers du dossier Controller sont reconnus comme contrôleurs, avec injection des dépendances via les arguments.s
    App\Controller\:
        resource: '../src/Controller'
        tags: ['controller.service_arguments']
    
    # Tous les repositories seront reconnus automatiquement comme services Doctrine
    App\Repository\:
        resource: '../src/Repository'
        tags: ['doctrine.repository_service']
        autowire: true
        autoconfigure: true

    App\Security\LoginSuccessHandler:
        arguments:
            $jwtManager: '@lexik_jwt_authentication.jwt_manager'

    # Liaison du paramètre mailer_from à l’argument $from du service MailService
    App\Service\MailService:
        arguments:
            $from: '%mailer_from%'
            
parameters:
    mailer_from: '%env(MAILER_FROM)%'